Игровое поле представляет собой двухмерный клеточный мир, в котором агент может перемещаться (если клетка не является препятствием). Игровое поле представляет собой лабиринт из комнат и туннелей.

Лабиринт представляет собой набор прямоугольных комнат, соединенных между собой туннелями. У каждой комнаты может быть от 1 до 4 дверей включительно.

Каждая дверь ведет в туннель, который гарантировано приведет в другую комнату. Туннель не может разветвляться. Туннель не обязательно прямой. Туннель имеет единичную толщину (агент в ней может двигаться либо к одной комнате, либо к другой, другого не дано). Находясь в туннеле, можно видеть только ту часть, в которой агент уже был, или ту часть, которая находится в зоне его видимости (он не может смотреть за угол туннеля). Гарантируется, что в туннелях нет объектов (кроме самого агента).

Только войдя в комнату можно увидеть, что в ней находится (находясь в клетке двери содержимое комнаты не видно).

Механики:

- Чтобы взять задание у Сфинкса нужно подойти к нему и направить агента в сторону Сфинкса (агент при этом не сместиться, но активирует задание Сфинкса).
- Кнопки имеют цвет;
- Кнопки находятся на стене;
- Чтобы активировать кнопку нужно подойти к ней и направить агента в сторону кнопки (агент при этом не сместиться, но активирует кнопку).
- Чтобы выйти из лабиринта нужно, чтобы агент перешел на клетку с выходом;
- Выход находится в пределах комнаты (но не в стене и не в туннеле);
- Сфинкс находится в пределах комнаты (в его клетку нельзя переместиться, то есть агенту нужно его обходить при выполнении заданий или при перемещении к выходу);
- Чтобы взять ключ, агент должен перейти в клетку с ключом (и тогда ключ исчезнет с карты).
- Если агент врежется в стену, то он останется на том месте, где был (до врезания в стену)

Задача агента в каждом лабиринте - найти определенный выход (`2`), выполняя задания Сфинкса. После достижения выхода агент переходит в другой лабиринт (автоматически).

Для решения каждого лабиринта агент должен:

1. Найти сфинкса в лабиринте
2. Получить у него задание (задания) (в виде текста).
3. Выполнить его (их) ("Испытание пройдено успешно!").
4. Найти нужный выход (`2`); зачастую нужный выход находится в комнате со Сфинксом.

Задание Сфинкса выдается в виде текста. Задания сфинкса могут быть разные:

1. Задания может быть двигаться сразу к нужному (единственному) выходу. ("Да откроется для тебя выход!")
2. Из нескольких возможных выходов нужно выбрать правильный; а где правильный - укажет сам Сфинкс. ("Ты должен сам найти верный выход - он находится на юго-востоке").
3. Нужно активировать несколько определенных кнопок, которые появятся в этой комнате. ("Для выхода активируй в этой комнате желтую и красную кнопки").
4. Нужно выполнить движения, которые укажет Сфинкс ("Прежде чем пройти, исполни танец, повторив мои движени точь в точь: Соверши один шаг на запад, один шаг вправо и шаг влево.")
5. Нужно ответить на загадку Сфинкса, представленную в виде текста ("Ответь на мою загадку одним словом: Из чего чем больше берешь, тем больше оно становится?")
6. На карте в случайных комнатах появляются разные ключи; нужно найти и взять определенные ключи, избегая взятия других ключей. После того, как ключи были взяты, нужно вернуться к Сфинксу. ("Чтобы выйти ступай найди и принеси мне красный и фиолетовый ключи и только их!")

Задания Сфинкса могут комбинироваться (даваться несколько на одном лабиринте). Если агент провалил одно задание, то Сфинкс может дать шанс выполнить другое задание.

Примечание:

- Юг - это вниз, север - это вверх, запад - это влево, восток - это вправо.

Возможные загадки:

- "Что весит больше: килограмм пуха или килограмм железа?"; ответ: "равны".

=========

Алгоритмы, которые нужно реализовать:

Особенности агента:

- у агента должно быть две решающие системы: одна система управляется LLM - она дает задания для второй системы; вторая система служит для перемещения по лабиринту и выполнению относительно простых заданий (нахождение Сфинкса, нахождение определенных ключей и избегание остальных ключей, нажатие на определенные кнопки и т.д.);
- агент должно понимать, какое задание он прямо сейчас должен выполнять;
- агент должен запоминать карту лабиринта, который он сейчас решает. Перейдя на другой лабиринт, память старого лабиринта больше не нужна.
- у решающей системы, отвечающей за движение, должно быть несколько свойств и команд управления агентом:
  - система должна знать, где в данный момент находится агент;
  - система должна знать, где находится Сфинкс, если, конечно, агент встречал его
  - система должна запоминать карту лабиринта при передвижении по лабиринту
  - move(x, y) - движение в определенную точку лабиринта;
  - enter(x, y) - агент двигается в заданные координаты двери, а затем передвигается на другой конец туннеля.
  - search(objects) - поиск во вcем лабиринте определенных объектов;
  - press(buttons) - агент нажимает на заданные кнопки (только данные кнопки) в комате;
  - act(movements) - агент выполняет определенные действия ("Up", "Left", "Down", "Right") - это нужно для четвертого задания (или когда система перемещения входит в ступор).
- у решающей системы управления с помощью LLM должно быть несколько свойств и команд управления агентом:
  - данная система должна помнить задания, которая она дает системе движения
  - при принятии решения данной системе на вход подаются: координаты агента, список известных и наблюдаемых объектов, история заданий, текущее задание;
  - когда данная система приняла решение, она должна выдать ответ в виде словаря с полями: type - тип текущего задания, items - словарь со значениями. Возможные значения поля type:
    - "type": "search" - агенту дается команда искать определенные объекты (например, когда нужно найти Сфинкса или определенные ключи) (`search(**llm_response["items"])`)
    - "type": "move" - агенту дается команда двигаться в определенные координаты (например для заданий 1 или 2) (`move(**llm_response["items"])`)
    - "type": "answer" - агенту дается команда ответить на поставленный вопрос (5-е задание) (`answer(**llm_response["items"])`)
    - "type": "act" - агенту дается команда сделать определенные движения (4-е задание) (`act(**llm_response["items"])`)
    - "type": "press" - агенту дается команда нажать на заданные кнопки (3-е задание) (`act(**llm_response["items"])`)

Объекты (/inputs):

- `3` - сам агент
- `5` - Сфинкс
- `2` - выход
- `1` - пустое (свободное) пространство
- `0` - неизвестность или стенка
- `4` - дверь
- `6x` - кнопка

  - `61` - красного цвета
  - `62` - зеленого цвета
  - `63` - синего цвета
  - `64` - желтого цвета
  - `65` - фиолетового цвета
  - `67` - серого цвета

- `7x` - кнопка
  - `71` - красного цвета
  - `72` - зеленого цвета
  - `73` - синего цвета
  - `74` - желтого цвета
  - `75` - фиолетового цвета
  - `77` - серого цвета

Примерный алгоритм работы агента:

```
- Агенту изначально дается задание найти Сфинкса (`search([5])`)
- Агент ищет по лабиринту Сфинкса (параллельно запоминая карту лабиринта)
- Агент находит Сфинкса (он пытается переместиться в координаты Сфинкса, активировав задание, но при этом в конечном счете агент останется возле Сфинкса); так же агент запоминает координаты Сфинкса
- Агенту дается задание (пусть это будет поиск определенных ключей)
- Агент анализирует задание с помощью LLM и выдает команду себе: `search(objects=[...])`
- Агент ищет данные объекты (ключи) по всей карте
- Как только все ключи найдены, агент возращается к Сфинксу (`move(sphinx_x, sphinx_y)`)
- Сфинкс принимать ключи и дает агенту новое задание: "Прежде чем пройти, исполни танец, повторив мои движени точь в точь: Соверши один шаг на запад, два шага вправо и шаг влево."
- LLM система анализирует задачу и выдает команду агенту: `act(["Left", "Right", "Right", "Left"])`
- После выполнения данного задания появляется выход (в данной комнате)
- Агент перемещается к нему: `move(exit_x, exit_y)`
```
