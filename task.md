# Первый уровень. Ты не готов

## Преамбула

В этот тёплый летний день ты как обычно шел в сторону офиса вдоль близлежащего парка. Всё наконец расцвело: густая зелень застилала взгляд, а где-то в листве тихо щебетали птички. Казалось, природа была в полной гармонии, но в людях ощущалось нечто иное. Сегодня улицы были непривычно многолюдными и оживлёнными: кто-то куда-то спешил, кто-то толкался, всем явно было куда-то надо.

И вот, проходя мимо, какой-то молодой человек в тёмных очках и чёрном длинном плаще задел тебя плечом. Ты обернулся, ожидая каких-то извинений, но вместо этого услышал странную, почти шёпотом произнесённую фразу:

— Ты не готов.

Пожав плечами и недоумевая от странных современных манер, ты продолжил свой путь. До офиса оставалось совсем немного — лишь перейти на другую сторону дороги и свернуть за угол. В этот момент твое внимание привлёк проезжавший мимо пешеходного перехода автобус. На его борту красовалась реклама зубной пасты: девушка с ослепительной улыбкой и... огромные буквы: «ТЫ НЕ ГОТОВ».

Ты замедлил шаг, удивлённо нахмурившись. Довольно странное название для зубной пасты, не так ли? Или это была все же не зубная паста? Так или иначе, перейдя дорогу, ты приблизился к автобусной остановке, где как раз сменялся баннер. Объявление о праздничном фестивале в городе заменилось тремя алыми словами на белом фоне: «Ты не готов».

Немного растерявшись, ты шагнул ближе, протирая глаза — уж не мираж ли это? Возможно, стоило бы в этот момент смотреть под ноги, а не на баннер. Потому что именно тогда под подошвой оказалась банановая кожура.

Мир внезапно перевернулся. Полёт. Асфальт. Резкий удар головой. Всё слилось в гул, в ушах зазвенело. В глазах темнело, реальность ускользала. Ты лежишь на тёплом асфальте, рассудок мутнеет, и последнее, что ты успеваешь различить — силуэт того самого молодого человека в тёмных очках и плаще. Он склоняется над тобой с насмешливой ухмылкой:

— Я же говорил... Ты не готов, — доносится до тебя сквозь нарастающую тьму, словно через сон...

## Пробуждение

Ты открыл глаза и обнаружил себя сидящим на жёстком деревянном стуле посреди очень тёмной комнаты. Размеры помещения трудно определить — куда ни посмотри, вокруг лишь непроглядная темнота и звенящая тишина. Стены, если они вообще существуют, теряются во мраке.

Единственный источник света здесь — тусклое, зеленоватое свечение от старого ЭЛТ-монитора, стоящего на столе прямо перед тобой. На экране — чёрный терминал с мигающим белым курсором. Рядом — клавиатура и мышка, покрытые тонким слоем пыли, как будто их давно никто не трогал.

Ты не успеваешь даже толком пошевелиться, как курсор внезапно начинает двигаться сам по себе. На экране начинают проступать слова:

Проснись...

За этой короткой фразой следует пауза. Монитор как будто ожидает твоей реакции. Затем курсор вновь оживает:

Ты должен подготовиться к тому, что грядёт. Начни с малого — подготовь свой проект.

Создай папку src. А в ней — новый проект на языке Python. Любые библиотеки, любые фреймворки. Никаких ограничений. Не забудь в конце всех заданий направить себе этот проект в виртуальное хранилище, чтобы потом получить к нему доступ!

Мы создадим веб-сервис, чтобы ты был готов, когда он начнется...

Курсор вновь замирает. Тишина вокруг кажется ещё плотнее, чем прежде. Ты опускаешь взгляд на клавиатуру. Монитор ждет.

## Действия

```
Подготовь указанные эндпоинты, чтобы иметь возможность действовать, когда придет время. Описание и подробности найдешь ниже. Обрати внимание: API здесь синхронный, а сервер — Stateful!

openapi: 3.0.4
info:
  title: Final API
  description: API для решения финальных задач
  version: 1.0.0
servers:
  - url: localhost:8080
tags:
  - name: Task
    description: Операции, связанные с финальными задачами
paths:
  /inputs:
    post:
      tags:
        - Task
      summary: Задача создания ввода
      description: Принимает данные в матричном формате и создает событие ввода
      requestBody:
        description: Данные для создания события ввода
        content:
          application/json:
            schema:
              type: object
              required:
                - view
              properties:
                view:
                  type: array
                  items:
                    type: array
                    items:
                      type: integer
              description: Матрица данных
        required: true
      responses:
        '200':
          description: Созданное событие ввода
          content:
            application/json:
              schema:
                type: object
                required:
                  - action
                properties:
                  action:
                    type: string
        '400':
          description: Задача не решена, так как формат данных неверный
          content:
            application/json:
              schema:
                type: object
                required:
                  - action
                properties:
                  action:
                    type: string
                    enum: [None]

  /tasks:
    post:
      tags:
        - Task
      summary: Постановка задачи
      description: Принимает данные о задаче
      requestBody:
        description: Данные о задаче
        content:
          application/json:
            schema:
              type: object
              required:
                - type
                - task
              properties:
                type:
                  type: string
                  description: Тип задачи
                task:
                  type: string
                  description: Описание задачи
        required: true
      responses:
        '200':
          description: Задача принята и решена
          content:
            application/json:
              schema:
                type: object
                required:
                  - answer
                properties:
                  answer:
                    type: string
        '400':
          description: Задача не принята, так как формат данных неверный

  /tasks/last:
    patch:
      tags:
        - Task
      summary: Результат решения последней задачи
      description: Принимает данные о результате решения последней задачи
      requestBody:
        description: Результат решения
        content:
          application/json:
            schema:
              type: object
              required:
                - result
              properties:
                result:
                  type: string
                  enum: [Ok, TryAgain, Fail]
                  description: Результат
        required: true
      responses:
        '200':
          description: Данные приняты
        '400':
          description: Данные не приняты, так как формат данных неверный
        '404':
          description: Данные не приняты, так как до этого не было поставленной задачи (или ее результаты уже были приняты до этого)

  /notifications:
    post:
      tags:
        - Task
      summary: Уведомление о произведенных действиях
      description: Принимает данные о произведенных действиях
      requestBody:
        description: Данные о произведенном действии
        content:
          application/json:
            schema:
              type: object
              required:
                - type
                - desc
              properties:
                type:
                  type: string
                  description: Тип произведенного действия
                desc:
                  type: string
                  description: Доп. информация о произведенном действии
        required: true
      responses:
        '200':
          description: Данные приняты
        '400':
          description: Данные не приняты, так как их формат неверный
```

## Связь

Тебе понадобится помощь. Настрой связь с LLM. Описание ниже.

Необходимо получить API-ключ для GigaChat и разобраться в его API. При запуске написанного веб-сервиса сделай запрос на получение списка моделей (https://gigachat.devices.sberbank.ru/api/v1/models) и выведи их в консоль.

## Запуск

Отлично. Последнее, что остается для подготовки, — запуск веб-сервиса. Этот процесс должен быть максимально простым, чтобы в экстренной ситуации можно было быстро ввести тебя в бой. Самое логичное решение в данном случае — Docker.

Необходимо составить Dockerfile для разработанного веб-сервиса.

Он должен быть написан так, чтобы с его помощью полностью собирался сервис, а при запуске контейнера веб-сервис запускался бы автоматически. Сам Dockerfile также положи в папку src.
Итоговый Docker-образ должен весить не более 4 ГБ.

## Готовность

Пора проверить готовность. Запусти заглушечные тесты.

Запрос первый:

Вход:

```
POST /inputs
{
  "view": [[2,1,0],[0,3,1]]
}
```

Ожидаемый выход:

```
200
{
  "action": "Something",
}
```

Запрос второй:

Вход:

```
POST /inputs
{
  "view": [2,1,0,0,3,1]
}
```

Ожидаемый выход:

```
400
{
  "action": "None",
}
```

Запрос третий:

Вход:

```
POST /tasks
{
  "type": "Question",
  "task": "Ты готов?"
}
```

Ожидаемый выход:

```
200
{
  "answer": "Да",
}
```

Запрос четвертый:

Вход:

```
PATCH /tasks/last
{
  "result": "Ok"
}
```

Ожидаемый выход:

```
200
```

Запрос пятый:

Вход:

```
PATCH /tasks/last
{
  "result": "Fail"
}
```

Ожидаемый выход:

```
404
```

Запрос шестой:

Вход:

```
POST /notifications
{
  "type": "PreparationDone",
  "desc": "Ждем тебя в финале!"
}
```

Ожидаемый выход:

```
200
```
